<!-- Lesson 2 HTML - Using Landsat 8 SR dataset -->
<h2>Lesson 2 rhs — Working with ImageCollections</h2>

<p>In this lesson, you’ll start using real satellite imagery. You’ll work with a dataset from Landsat 8 that provides surface reflectance values. 
Google Earth Engine stores these images in something called an ImageCollection.</p>

<p>In this lesson, you’ll learn how to:</p>
<ul>
  <li>Load a dataset using <code>ee.ImageCollection()</code></li>
  <li>Filter it by date and cloud cover</li>
  <li>Turn it into one composite image using <code>.mosaic()</code></li>
  <li>Display it with <code>Map.addLayer()</code></li>
  <li>Clip it to a boundary</li>
</ul>

<h3>2.1 Loading the dataset</h3>
<p>To load satellite data, use <code>ee.ImageCollection()</code> and put the dataset name in quotes. For this lesson, we’re using:</p>
<code>'LANDSAT/LC08/C01/T1_SR'</code>

<p>This is the Surface Reflectance product for Landsat 8. The images have already been atmospherically corrected, so you don’t need to scale them.</p>

<p>Let's create a variable called "landsat" that stores our Landsat image collection. </p>
<code>var landsat = ee.ImageCollection("LANDSAT/LC08/C02/T1_L2");</code>

<p>Now you try it. Create a variable called "my_landsat_collection" and load the same Landsat dataset.</p>

<div style="margin-bottom:12px;">
  <div id="hint21" style="visibility:hidden; width:100%; background-color:#f0f0f0; border-left:4px solid #ccc; padding:2px 6px; margin-bottom:4px;">
    Use <code>ee.ImageCollection()</code> with the dataset ID in quotes. Assign it to a variable called <code>my_landsat_collection</code>.
  </div>
  <button id="hintButton21" onclick="
    var el = document.getElementById('hint21');
    var btn = document.getElementById('hintButton21');
    var showing = el.style.visibility === 'visible';
    el.style.visibility = showing ? 'hidden' : 'visible';
    btn.style.backgroundColor = showing ? '#689f38' : '#558b2f';
  " style="background-color:#689f38; color:white; border:none; padding:4px 10px; border-radius:6px; font-weight:bold; cursor:pointer; width:60px; float:right;">
    hint
  </button>
</div>

<div style="margin-bottom:12px;">
  <div id="code21" style="visibility:hidden; width:100%; background-color:#f0f0f0; border-left:4px solid #ccc; padding:2px 6px; margin-bottom:4px;">
    <code>var my_landsat_collection = ee.ImageCollection("LANDSAT/LC08/C02/T1_L2");</code>
  </div>
  <button id="codeButton21" onclick="
    var el = document.getElementById('code21');
    var btn = document.getElementById('codeButton21');
    var showing = el.style.visibility === 'visible';
    el.style.visibility = showing ? 'hidden' : 'visible';
    btn.style.backgroundColor = showing ? '#1e88e5' : '#1565c0';
  " style="background-color:#1e88e5; color:white; border:none; padding:4px 10px; border-radius:6px; font-weight:bold; cursor:pointer; width:60px; float:right;">
    code
  </button>
</div>

<p>Now try printing "my_landsat_collection". What happens? </p>
<code>print(my_landsat_collection);</code>

<h3>2.2 Filtering by date</h3>
<p>You can filter an ImageCollection using <code>.filterDate()</code>.</p>
<code>my_landsat_collection.filterDate('2020-07-01', '2020-08-31');</code>

<p>Try filtering your ImageCollection to include only May 2024, and store the result in a variable called <code>mayImages</code>.</p>

<div style="margin-bottom:12px;">
  <div id="hint22" style="visibility:hidden; width:100%; background-color:#f0f0f0; border-left:4px solid #ccc; padding:2px 6px; margin-bottom:4px;">
    Use <code>.filterDate()</code> with the correct date range and assign the result to a new variable called <code>mayImages</code>.
  </div>
  <button id="hintButton22" onclick="
    var el = document.getElementById('hint22');
    var btn = document.getElementById('hintButton22');
    var showing = el.style.visibility === 'visible';
    el.style.visibility = showing ? 'hidden' : 'visible';
    btn.style.backgroundColor = showing ? '#689f38' : '#558b2f';
  " style="background-color:#689f38; color:white; border:none; padding:4px 10px; border-radius:6px; font-weight:bold; cursor:pointer; width:60px; float:right;">
    hint
  </button>
</div>

<div style="margin-bottom:12px;">
  <div id="code22" style="visibility:hidden; width:100%; background-color:#f0f0f0; border-left:4px solid #ccc; padding:2px 6px; margin-bottom:4px;">
    <code>var mayImages = my_landsat_collection.filterDate('2024-05-01', '2024-06-01');</code>
  </div>
  <button id="codeButton22" onclick="
    var el = document.getElementById('code22');
    var btn = document.getElementById('codeButton22');
    var showing = el.style.visibility === 'visible';
    el.style.visibility = showing ? 'hidden' : 'visible';
    btn.style.backgroundColor = showing ? '#1e88e5' : '#1565c0';
  " style="background-color:#1e88e5; color:white; border:none; padding:4px 10px; border-radius:6px; font-weight:bold; cursor:pointer; width:60px; float:right;">
    code
  </button>
</div>

<h3>2.3 Filtering by cloud cover</h3>
<p>Use the metadata property <code>'CLOUD_COVER'</code> and <code>ee.Filter.lt()</code> to remove cloudy images:</p>
<code>mayImages.filter(ee.Filter.lt('CLOUD_COVER', 10));</code>

<p>Filter <code>mayImages</code> to include only images with less than 5% cloud cover. Store it in <code>cleanImages</code>.</p>

<div style="margin-bottom:12px;">
  <div id="hint23" style="visibility:hidden; width:100%; background-color:#f0f0f0; border-left:4px solid #ccc; padding:2px 6px; margin-bottom:4px;">
    Use <code>.filter()</code> and <code>ee.Filter.lt()</code> on <code>mayImages</code> to check for cloud cover less than 5.
  </div>
  <button id="hintButton23" onclick="
    var el = document.getElementById('hint23');
    var btn = document.getElementById('hintButton23');
    var showing = el.style.visibility === 'visible';
    el.style.visibility = showing ? 'hidden' : 'visible';
    btn.style.backgroundColor = showing ? '#689f38' : '#558b2f';
  " style="background-color:#689f38; color:white; border:none; padding:4px 10px; border-radius:6px; font-weight:bold; cursor:pointer; width:60px; float:right;">
    hint
  </button>
</div>

<div style="margin-bottom:12px;">
  <div id="code23" style="visibility:hidden; width:100%; background-color:#f0f0f0; border-left:4px solid #ccc; padding:2px 6px; margin-bottom:4px;">
    <code>var cleanImages = mayImages.filter(ee.Filter.lt('CLOUD_COVER', 5));</code>
  </div>
  <button id="codeButton23" onclick="
    var el = document.getElementById('code23');
    var btn = document.getElementById('codeButton23');
    var showing = el.style.visibility === 'visible';
    el.style.visibility = showing ? 'hidden' : 'visible';
    btn.style.backgroundColor = showing ? '#1e88e5' : '#1565c0';
  " style="background-color:#1e88e5; color:white; border:none; padding:4px 10px; border-radius:6px; font-weight:bold; cursor:pointer; width:60px; float:right;">
    code
  </button>
</div>

<h3>2.4 to 2.7</h3>
<p>To fix button alignment for the remaining sections, apply <code>float:right;</code> to every hint/code button's inline <code>style</code>.</p>
