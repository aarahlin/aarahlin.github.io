<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Lesson 3 - Buffers, Reduction, and Exporting</title>
</head>
<body style="font-family:Arial, sans-serif; margin:20px;">

<!-- Lesson 3 HTML - Creating Buffers, using reducers, and exporting .csv files -->
<h2>Lesson 3 — Creating Buffers, Using Reducers, and Exporting .CSV files</h2>

<p>In this lesson, you’ll work with bird survey data in Google Earth Engine. You'll learn to: </p>
<ul>
  <li>Upload and map bird point count data</li>
  <li>Create buffers around points using <code>.map()</code> and <code>.buffer()</code></li>
  <li>Use a <code>Reducer</code> to count landcover pixels</li>
  <li>Rework data into a flat table</li>
  <li>Export your table to Google Drive</li>
</ul>

<h3>3.1 Upload and map the Blue-gray Gnatcatcher data</h3>

<p>
We'll be using bird point count data that represent Blue-gray Gnatcatchers were detected. Begin by downloading the gnatcatcher_data.csv to your own laptops. You can find the dataset linked here: <a href="https://github.com/aarahlin/aarahlin.github.io/blob/main/gnatcatcher_data.csv">gnatcatcher data</a>
 Upload gnatcatcher_data.csv to Google Earth Engine using the Assets tab in the upper left of the console.
</p>

<p>
Since your .csv file contains lat longs, Google Earth Engine assumes that it is a FeatureCollection (vector file with points, lines, polygons) rather than an ImageCollection (like the Landsat rasters we worked with). The AOU code for Blue-gray Gnatcatcher is <code>bggn</code>, so create a variable <code>bggn</code> and set it equal to your FeatureCollection, which is the file path to your file. Then, print "bggn" to examine its structure.
</p>

<!-- HINT Row -->
<div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:6px;">
  <div id="hint" style="visibility:hidden; height:auto; background-color:#f0f0f0; border-left:4px solid #ccc; padding:2px 6px; margin:0px; flex:1;">
    You will need to use <code>ee.FeatureCollection()</code> to load your uploaded .csv file into Earth Engine. Then use the <code>print()</code> function to print bggn.
  </div>
  <button id="hintButton" onclick="
    var el = document.getElementById('hint');
    var btn = document.getElementById('hintButton');
    var showing = el.style.visibility === 'visible';
    el.style.visibility = showing ? 'hidden' : 'visible';
    btn.style.backgroundColor = showing ? '#689f38' : '#558b2f';
  " style="background-color:#689f38; color:white; border:none; padding:4px 10px; border-radius:6px; font-weight:bold; cursor:pointer; margin-left:8px; width:60px;">
    hint
  </button>
</div>

<!-- CODE Row -->
<div style="display:flex; justify-content:space-between; align-items:center;">
  <div id="code" style="visibility:hidden; height:auto; background-color:#f0f0f0; border-left:4px solid #ccc; padding:2px 6px; margin:0px; flex:1;">
    <code>
var bggn = ee.FeatureCollection("projects/ee-anastasiarahlin/assets/gnatcatcher_data");<br>
print("bggn featureCollection:", bggn);</br>
    </code>
  </div>
  <button id="codeButton" onclick="
    var el = document.getElementById('code');
    var btn = document.getElementById('codeButton');
    var showing = el.style.visibility === 'visible';
    el.style.visibility = showing ? 'hidden' : 'visible';
    btn.style.backgroundColor = showing ? '#1e88e5' : '#1565c0';
  " style="background-color:#1e88e5; color:white; border:none; padding:4px 10px; border-radius:6px; font-weight:bold; cursor:pointer; margin-left:8px; width:60px;">
    code
  </button>
</div>

</body>
</html>
